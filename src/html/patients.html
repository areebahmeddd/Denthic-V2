<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Records - DentistFriend</title>
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ¦·</text></svg>"
    />
    <link rel="stylesheet" href="../css/common.css" />
    <link rel="stylesheet" href="../css/dashboard.css" />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo-section">
          <button class="sidebar-toggle" id="sidebar-toggle">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <line x1="3" y1="12" x2="21" y2="12"></line>
              <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
          </button>
          <div class="logo">ðŸ¦·</div>
          <div class="title-section">
            <h1>DentistFriend</h1>
            <span class="subtitle">Record Manager</span>
          </div>
        </div>
        <div class="user-section">
          <div class="user-info">
            <span class="greeting"
              >Hello, <span id="doctor-name">Doctor</span></span
            >
            <span class="user-email" id="doctor-email">doctor@example.com</span>
          </div>
          <button class="logout-btn" onclick="logout()">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
              <polyline points="16,17 21,12 16,7"></polyline>
              <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
          </button>
        </div>
      </div>
    </header>

    <div class="main-container">
      <!-- Sidebar Overlay for Mobile -->
      <div class="sidebar-overlay" id="sidebar-overlay"></div>

      <!-- Sidebar -->
      <aside class="sidebar collapsed">
        <nav class="nav-menu">
          <a href="dashboard.html" class="nav-item" title="Dashboard">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <rect x="3" y="3" width="7" height="7"></rect>
              <rect x="14" y="3" width="7" height="7"></rect>
              <rect x="14" y="14" width="7" height="7"></rect>
              <rect x="3" y="14" width="7" height="7"></rect>
            </svg>
            <span>Dashboard</span>
          </a>
          <a href="patients.html" class="nav-item active" title="Patients">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <span>Patients</span>
          </a>
          <a href="analytics.html" class="nav-item" title="Analytics">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path d="M3 3v18h18"></path>
              <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"></path>
            </svg>
            <span>Analytics</span>
          </a>
          <a href="settings.html" class="nav-item" title="Settings">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"
              ></path>
              <circle cx="12" cy="12" r="3"></circle>
            </svg>
            <span>Settings</span>
          </a>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="main-content sidebar-collapsed">
        <div class="page-header">
          <h2>Patient Records</h2>
        </div>

        <!-- Date Range Filter for Patients -->
        <div class="patients-filters">
          <div class="patients-date-range">
            <h3>Filter by Date Range</h3>
            <div class="patients-date-controls">
              <div class="patients-date-inputs">
                <div class="date-input-group">
                  <label for="patients-from-date">From</label>
                  <div class="custom-date-picker">
                    <button
                      type="button"
                      class="date-picker-trigger"
                      id="patients-from-date-trigger"
                    >
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <rect
                          x="3"
                          y="4"
                          width="18"
                          height="15"
                          rx="2"
                          ry="2"
                        ></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                      </svg>
                      <span id="patients-from-date-display">dd/mm/yyyy</span>
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        class="chevron"
                      >
                        <polyline points="6,9 12,15 18,9"></polyline>
                      </svg>
                    </button>
                    <div class="calendar-dropdown" id="patients-from-calendar">
                      <div class="calendar-header">
                        <button
                          type="button"
                          class="calendar-nav"
                          id="patients-from-prev-month"
                        >
                          <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                          >
                            <polyline points="15,18 9,12 15,6"></polyline>
                          </svg>
                        </button>
                        <div
                          class="calendar-title"
                          id="patients-from-calendar-title"
                        >
                          January 2024
                        </div>
                        <button
                          type="button"
                          class="calendar-nav"
                          id="patients-from-next-month"
                        >
                          <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                          >
                            <polyline points="9,6 15,12 9,18"></polyline>
                          </svg>
                        </button>
                      </div>
                      <div class="calendar-grid">
                        <div class="calendar-weekdays">
                          <div>Su</div>
                          <div>Mo</div>
                          <div>Tu</div>
                          <div>We</div>
                          <div>Th</div>
                          <div>Fr</div>
                          <div>Sa</div>
                        </div>
                        <div
                          class="calendar-days"
                          id="patients-from-calendar-days"
                        >
                          <!-- Days will be populated by JavaScript -->
                        </div>
                      </div>
                    </div>
                    <input
                      type="hidden"
                      id="patients-from-date"
                      name="patients-from-date"
                    />
                  </div>
                </div>
                <div class="date-input-group">
                  <label for="patients-to-date">To</label>
                  <div class="custom-date-picker">
                    <button
                      type="button"
                      class="date-picker-trigger"
                      id="patients-to-date-trigger"
                    >
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                      >
                        <rect
                          x="3"
                          y="4"
                          width="18"
                          height="15"
                          rx="2"
                          ry="2"
                        ></rect>
                        <line x1="16" y1="2" x2="16" y2="6"></line>
                        <line x1="8" y1="2" x2="8" y2="6"></line>
                        <line x1="3" y1="10" x2="21" y2="10"></line>
                      </svg>
                      <span id="patients-to-date-display">dd/mm/yyyy</span>
                      <svg
                        width="16"
                        height="16"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        class="chevron"
                      >
                        <polyline points="6,9 12,15 18,9"></polyline>
                      </svg>
                    </button>
                    <div class="calendar-dropdown" id="patients-to-calendar">
                      <div class="calendar-header">
                        <button
                          type="button"
                          class="calendar-nav"
                          id="patients-to-prev-month"
                        >
                          <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                          >
                            <polyline points="15,18 9,12 15,6"></polyline>
                          </svg>
                        </button>
                        <div
                          class="calendar-title"
                          id="patients-to-calendar-title"
                        >
                          January 2024
                        </div>
                        <button
                          type="button"
                          class="calendar-nav"
                          id="patients-to-next-month"
                        >
                          <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                          >
                            <polyline points="9,6 15,12 9,18"></polyline>
                          </svg>
                        </button>
                      </div>
                      <div class="calendar-grid">
                        <div class="calendar-weekdays">
                          <div>Su</div>
                          <div>Mo</div>
                          <div>Tu</div>
                          <div>We</div>
                          <div>Th</div>
                          <div>Fr</div>
                          <div>Sa</div>
                        </div>
                        <div
                          class="calendar-days"
                          id="patients-to-calendar-days"
                        >
                          <!-- Days will be populated by JavaScript -->
                        </div>
                      </div>
                    </div>
                    <input
                      type="hidden"
                      id="patients-to-date"
                      name="patients-to-date"
                    />
                  </div>
                </div>
              </div>
              <div class="patients-date-presets">
                <button class="patients-preset-btn active" data-range="all">
                  All Dates
                </button>
                <button class="patients-preset-btn" data-range="today">
                  Today
                </button>
                <button class="patients-preset-btn" data-range="7">
                  Last 7 Days
                </button>
                <button class="patients-preset-btn" data-range="30">
                  Last 30 Days
                </button>
                <button class="patients-preset-btn" data-range="90">
                  Last 3 Months
                </button>
                <button class="patients-preset-btn" data-range="365">
                  Last Year
                </button>
                <button
                  class="patients-preset-btn clear-btn"
                  id="clearDateFilters"
                >
                  Clear
                  <svg
                    width="14"
                    height="14"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Search and Filters -->
        <div class="search-section">
          <div class="search-bar">
            <svg
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input
              type="text"
              id="search-patients"
              placeholder="Search any patient..."
            />
          </div>

          <div class="filter-buttons">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="cash">Cash</button>
            <button class="filter-btn" data-filter="insurance">
              Insurance
            </button>
          </div>
        </div>

        <!-- Patient Table -->
        <div class="table-container">
          <table id="patients-table" class="patients-table">
            <thead>
              <tr>
                <th>ID</th>
                <th>Visit Date</th>
                <th>Patient Name</th>
                <th>File Number</th>
                <th>Age</th>
                <th>Gender</th>
                <th>Type</th>
                <th>Insurance</th>
                <th>Procedures</th>
                <th>Total Amount</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <!-- Patient records will be populated here -->
            </tbody>
          </table>
        </div>
      </main>
    </div>

    <!-- Edit Patient Modal -->
    <div id="editPatientModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Edit Patient Record</h3>
        </div>
        <form id="editPatientForm" class="edit-form">
          <input type="hidden" id="edit-patient-id" name="patient-id" />

          <div class="form-row">
            <div class="form-group">
              <label for="edit-visit-date">Visit Date</label>
              <input
                type="date"
                id="edit-visit-date"
                name="visit-date"
                required
              />
            </div>
            <div class="form-group">
              <label for="edit-patient-type">Patient Type</label>
              <select id="edit-patient-type" name="patient-type" required>
                <option value="">Select patient type</option>
                <option value="cash">Cash</option>
                <option value="insurance">Insurance</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="edit-patient-name">Patient Name</label>
              <input
                type="text"
                id="edit-patient-name"
                name="patient-name"
                required
                placeholder="Enter patient name"
              />
            </div>
            <div class="form-group">
              <label for="edit-file-number">File Number</label>
              <input
                type="text"
                id="edit-file-number"
                name="file-number"
                required
                placeholder="Enter file number"
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="edit-patient-age">Age</label>
              <input
                type="number"
                id="edit-patient-age"
                name="patient-age"
                required
                placeholder="Enter age"
                min="1"
                max="120"
              />
            </div>
            <div class="form-group">
              <label for="edit-patient-gender">Gender</label>
              <select id="edit-patient-gender" name="patient-gender" required>
                <option value="">Select gender</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
              </select>
            </div>
          </div>

          <div class="form-row-single">
            <div
              class="form-group"
              id="edit-insurance-group"
              style="display: none"
            >
              <label for="edit-insurance-company">Insurance Company</label>
              <select id="edit-insurance-company" name="insurance-company">
                <option value="">Select insurance company</option>
              </select>
            </div>
          </div>

          <div class="procedures-section">
            <div class="procedures-header">
              <label>Procedures</label>
              <button
                type="button"
                class="add-procedure-btn"
                id="edit-add-procedure-btn"
              >
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M12 5v14M5 12h14" />
                </svg>
                Add Procedure
              </button>
            </div>
            <div id="edit-procedures-list" class="procedures-list">
              <!-- Procedure items will be added here dynamically -->
            </div>

            <div class="total-amount-row">
              <div class="form-group">
                <label for="edit-total-amount">Total Amount (SAR)</label>
                <input
                  type="number"
                  id="edit-total-amount"
                  name="total-amount"
                  readonly
                  step="any"
                  value="0"
                />
              </div>
            </div>
          </div>

          <div class="form-row-single">
            <div class="form-group">
              <label for="edit-remarks">Remarks</label>
              <textarea
                id="edit-remarks"
                name="remarks"
                rows="3"
                placeholder="Enter any notes or comments about the patient visit..."
              ></textarea>
            </div>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn-secondary" id="cancelEdit">
              Cancel
            </button>
            <button type="submit" class="btn-primary">
              <span>Update Patient</span>
              <svg
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M20 6L9 17l-5-5" />
              </svg>
            </button>
          </div>
        </form>
      </div>
    </div>

    <script type="module" src="../js/common.js"></script>
    <script type="module" src="../js/patients.js"></script>
  </body>
</html>
